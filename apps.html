<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Moonlight | Applications</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="games.css">
</head>
<body class="games-page">
    <canvas id="starfield"></canvas>

    <div class="ui-wrapper">
        <nav class="top-nav">
            <div class="nav-logo" onclick="window.location.href='main.html'" style="cursor:pointer">M // BACK</div>
            <div class="nav-links">
    <span onclick="toggleCloak()" style="cursor:pointer; margin-right: 20px;">CLOAK [ESC]</span>
    <span class="nav-status">DATABASE: <span id="entryCount">0</span> ENTRIES</span>
            </div>
        </nav>

        <div class="search-container">
            <input type="text" id="gameSearch" placeholder="SEARCH DATABASE..." autocomplete="off">
            <div class="search-line"></div>
        </div>

        <div class="games-container">
            <div class="games-grid" id="gamesGrid">
                <div class="rectangle-container">
                    <div class="rectangle" data-category="placeholder" onclick="window.location.href='/a/emulatorjs/index.html.html'">
                        <img src="https://files.catbox.moe/35jhlf.png" alt="emulatorjs">
                        <div class="game-name">EmulatorJS</div>
                    </div>
                </div>
                
                <div class="rectangle-container">
                    <div class="rectangle" data-category="placeholder" onclick="window.location.href='/a/etchasketch/index.html'">
                        <img src="/a/assets/etchasketch.png" alt="etchasketch">
                        <div class="game-name">EtchASketch</div>
                    </div>
                </div>

                <div class="rectangle-container">
                    <div class="rectangle" data-category="placeholder" onclick="window.location.href='/a/fluidsim/index.html'">
                        <img src="https://files.catbox.moe/9ccgcg.jpg" alt="fluidsim">
                        <div class="game-name">FluidSimulator</div>
                    </div>
                </div>

                <div class="rectangle-container">
                    <div class="rectangle" data-category="placeholder" onclick="window.location.href='/a/godoblocks/index.html'">
                        <img src="https://files.catbox.moe/iyav1n.jpg" alt="godoblocks">
                        <div class="game-name">GoDoBlocks</div>
                    </div>
                </div>

                <div class="rectangle-container">
                    <div class="rectangle" data-category="placeholder" onclick="window.location.href='/e.html'">
                        <img src="/a/assets/exploits.png" alt="exploits">
                        <div class="game-name">Exploits</div>
                    </div>
                </div>
                </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
    const searchInput = document.getElementById('gameSearch');
    const gameCards = document.getElementsByClassName('rectangle-container');
    const entryCount = document.getElementById('entryCount');

    // Function to update the counter
    function updateCounter() {
        let visibleCount = 0;
        for (let i = 0; i < gameCards.length; i++) {
            if (gameCards[i].style.display !== "none") {
                visibleCount++;
            }
        }
        entryCount.innerText = visibleCount;
    }

    // Live Search Filter Logic
    searchInput.addEventListener('keyup', function() {
        const filter = searchInput.value.toLowerCase();
        
        for (let i = 0; i < gameCards.length; i++) {
            const gameName = gameCards[i].querySelector('.game-name').innerText.toLowerCase();
            if (gameName.includes(filter)) {
                gameCards[i].style.display = "";
            } else {
                gameCards[i].style.display = "none";
            }
        }
        updateCounter(); // Update count after filtering
    });

    // Initial count on page load
    window.addEventListener('DOMContentLoaded', updateCounter);
</script>
</body>
</html>
