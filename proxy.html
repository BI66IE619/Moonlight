<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Moonlight | Proxy</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="proxy.css">
</head>
<body class="proxy-page">
    <canvas id="starfield"></canvas>

    <div class="ui-wrapper">
        <nav class="top-nav">
            <div class="nav-logo" onclick="window.location.href='main.html'" style="cursor:pointer">M // BACK</div>
            <div class="nav-links">
                <span onclick="toggleFullscreen()" style="cursor:pointer; margin-right: 20px;">[ FULLSCREEN ]</span>
                <span onclick="toggleCloak()" style="cursor:pointer; margin-right: 20px;">CLOAK [ESC]</span>
                <span class="nav-status">SYSTEMS: OPTIMAL</span>
            </div>
        </nav>

        <div class="window-container">
            <div class="window-header">
                <div class="dot-red"></div>
                <span class="window-title">SECURE_TUNNEL // INTEL_EDU</span>
            </div>
            
            <div class="iframe-wrapper">
                <div id="loading-overlay">
                    <div class="spinner"></div>
                    <p>ESTABLISHING ENCRYPTED LINK...</p>
                </div>
                <iframe id="proxy-frame" sandbox="allow-forms allow-scripts allow-same-origin allow-popups"></iframe>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Fullscreen Logic
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // Secure Injection Logic
        (function() {
            const frame = document.getElementById('proxy-frame');
            const overlay = document.getElementById('loading-overlay');
            const target = "https://intelleducation.netlify.app/";

            setTimeout(() => {
                frame.src = target;
                // Hide loading overlay once frame starts responding
                frame.onload = () => {
                    overlay.style.opacity = '0';
                    setTimeout(() => overlay.style.display = 'none', 500);
                };
            }, 1000);
        })();
    </script>
</body>
</html>
